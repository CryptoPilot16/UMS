<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Underground Money Society</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üçÑ</text></svg>">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { width: 100%; height: 100%; overflow: hidden; background: black; font-family: 'Courier New', Courier, monospace; color: #ddd; }
    #scene { position: absolute; width: 100vw; height: 100vh; z-index: 1; }
    #scene video, #scene-image { width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0; pointer-events: none; }
    .darken { filter: brightness(0.4); }
    .hotspot { position: absolute; width: 20px; height: 20px; border-radius: 50%; background: #fff; opacity: 0.6; z-index: 3; pointer-events: auto; transition: opacity 0.2s ease; border: none; }
    .hotspot:hover { animation: pulse 800ms infinite alternate ease-in-out; opacity: 1; }
    @keyframes pulse { from { box-shadow: 0 0 0 0 rgba(255,255,255,0.0); } to { box-shadow: 0 0 14px 2px rgba(255,255,255,0.9); } }
    .hotspot::after { content: attr(data-label); position: absolute; left: 50%; top: -10px; transform: translate(-50%, -100%) scale(1); white-space: nowrap; background: rgba(0,0,0,0.8); color: #e6ffe6; font-size: 12px; padding: 6px 8px; border-radius: 6px; opacity: 0; pointer-events: none; transition: opacity .12s ease, transform .12s ease; }
    .hotspot:hover::after { opacity: 1; transform: translate(-50%, -100%) scale(1.05); }
    #ui { position: absolute; top: 20px; left: 20px; z-index: 4; }
    .btn { padding: 8px 16px; font-size: 1em; background: rgba(255,255,255,0.1); border: 1px solid #888; color: white; cursor: pointer; margin: 6px; transition: 0.3s; }
    .btn:hover { background: rgba(255,255,255,0.3); }
    #dialogue { position: absolute; bottom: 30px; width: 100%; text-align: center; font-size: 1.2em; background: rgba(0,0,0,0.5); padding: 10px; z-index: 2; }
    #popup { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: none; align-items: center; justify-content: center; z-index: 10; }
    #popup video { max-width: 90%; max-height: 90%; }

    /* Mobile landscape handling for scene 3 */
    @media (max-width: 768px) and (orientation: landscape) {
      #scene-image.scene3-mobile {
        background: url('scene3-vertical.png') center/contain no-repeat !important;
        transform: rotate(90deg);
        transform-origin: center center;
      }
      .hotspot.mobile-scene3 {
        transform: rotate(-90deg);
      }
      #ui { top: auto; bottom: 20px; left: 20px; }
    }
  </style>
</head>
<body>
  <div id="scene"></div>
  <div id="ui">
    <div style="display: flex; flex-direction: column; align-items: flex-start;">
      <button class="btn" onclick="advanceScene()">advance</button>
      <button class="btn" onclick="toggleAudio()">audio</button>
    </div>
  </div>
  <div id="dialogue">Private! Get ready. We're entering Sector 4.</div>
  <audio id="radio" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" autoplay loop></audio>
  <div id="popup" onclick="closePopup()">
    <video id="popupVideo" controls></video>
  </div>
  <script>
    const DEFAULT_LABELS = ['Twitter','Chart','Telegram','Community','Lore'];
    const HOTSPOT_LINKS = {
      'Twitter': 'https://x.com/UMSonSOL',
      'Chart': 'https://dexscreener.com/solana/ct9g9gddxwnvagvkjq9xoejvynpipr7uxx4akp6g8mhv',
      'Telegram': 'https://t.me/undergroundmoneysocietymemes',
      'Community': 'https://x.com/i/communities/1952904167753957408',
      'Lore': 'popup'
    };
    let scenes = [
      { background: 'scene1.mp4', type: 'video', class: 'darken', text: 'Get ready. You\'re entering the Underground Money Society.' },
      { background: 'scene2.mp4', type: 'video', class: 'darken', text: 'The hardest degens of the Solana trenches' },
      { background: 'scene3.png', type: 'image', class: '', text: 'Join the Underground: 9Z4EZGiirqkjE2Mfnb4xmJebxxqZZugTwewVRfo8bonk', labels: DEFAULT_LABELS, hotspots: [
        { x: '55%', y: '23%' },
        { x: '69%', y: '25%' },
        { x: '95%', y: '45%' },
        { x: '39%', y: '45%' },
        { x: '8%', y: '30%' }
      ] }
    ];
    let currentScene = 0;

    function advanceScene() {
      currentScene++;
      if (currentScene >= scenes.length) currentScene = 0;
      updateScene();
    }

    function updateScene() {
      const sceneContainer = document.getElementById('scene');
      sceneContainer.innerHTML = '';
      const current = scenes[currentScene];

      if (current.type === 'video') {
        const video = document.createElement('video');
        video.src = current.background;
        video.autoplay = true;
        video.loop = true;
        video.muted = true;
        video.playsInline = true;
        if (current.class) video.className = current.class;
        sceneContainer.appendChild(video);
      } else if (current.type === 'image') {
        const img = document.createElement('div');
        img.id = 'scene-image';
        img.style.background = `url('${current.background}') center/cover no-repeat`;
        if (current.class) img.className = current.class;
        if (current.background.includes('scene3')) {
          img.classList.add('scene3-mobile');
        }
        sceneContainer.appendChild(img);
      }

      if (current.hotspots) {
        const labels = current.labels || DEFAULT_LABELS;
        current.hotspots.forEach((hs, i) => {
          const dot = document.createElement('div');
          dot.className = 'hotspot';
          if (current.background.includes('scene3')) {
            dot.classList.add('mobile-scene3');
          }
          dot.style.left = hs.x;
          dot.style.top = hs.y;
          dot.setAttribute('data-label', labels[i] || '');
          dot.onclick = () => handleHotspotClick(labels[i]);
          sceneContainer.appendChild(dot);
        });
      }

      document.getElementById('dialogue').textContent = current.text;
    }

    function handleHotspotClick(label) {
      const link = HOTSPOT_LINKS[label];
      if (link === 'popup') {
        document.getElementById('popupVideo').src = 'lore.mp4';
        document.getElementById('popup').style.display = 'flex';
      } else if (link) {
        window.open(link, '_blank');
      }
    }

    function closePopup() {
      const popup = document.getElementById('popup');
      const video = document.getElementById('popupVideo');
      video.pause();
      popup.style.display = 'none';
    }

    function toggleAudio() {
      const audio = document.getElementById('radio');
      if (audio.paused) { audio.currentTime = 0; audio.play(); } else { audio.pause(); }
    }

    window.addEventListener('wheel', (event) => {
      if (event.deltaY < 0) {
        advanceScene();
      } else if (event.deltaY > 0) {
        currentScene--;
        if (currentScene < 0) currentScene = scenes.length - 1;
        updateScene();
      }
    });

    window.onload = () => {
      updateScene();
      document.getElementById('radio').volume = 0.2;
    };
  </script>
</body>
</html>
